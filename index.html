<!DOCTYPE html>
<html>
<head>
  <title>Greenplum Overview</title>
  <meta charset="utf-8">
  <meta name="description" content="Greenplum Overview">
  <meta name="author" content="Rupen Bandyopadhyay">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Greenplum Overview</h1>
    <h2></h2>
    <p>Rupen Bandyopadhyay<br/>EMC$^2$</p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>Greenplum Database is now open source</h2>
  </hgroup>
  <article data-timings="">
    <p><br/>
<br/></p>

<ol>
<li><p>Visit <a href="http://greenplum.org">http://greenplum.org</a>. There is a link to get a sandbox VM with pretty much everything installed.  </p></li>
<li><p>View the code repository at <a href="https://github.com/greenplum-db/gpdb">https://github.com/greenplum-db/gpdb</a>  </p></li>
<li><p>Get the documentation from <a href="http://gpdb.docs.pivotal.io">http://gpdb.docs.pivotal.io</a>  </p></li>
<li><p>Subscribe to the mailing lists if you want to remain informed about all recent changes or proposed changes.  </p></li>
<li><p>Contribute!  </p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Greenplum as MPP</h2>
  </hgroup>
  <article data-timings="">
    <p>Everything is distributed to multiple servers. Scalability is linear to number of servers.    </p>

<ol>
<li><p>Data<br>
i. More data storage (Big Data)<br>
ii. Faster read and write performance compared to a centralized storage system ike SAN.</p></li>
<li><p>Processing<br>
i. Distributed Data Load<br>
ii. Distributed query Processing<br>
iii. Even within a single server, data is processed in parallel to acheieve faster processing<br>
iv. Query Processor ensures that bulk of the processing happen independently in servers</p></li>
<li><p>Database Management<br>
i. Parallel / Distributed backup and restore<br>
ii. Parallel / Distributed Table analysis and space management<br>
iii. Pararrel / Distributed server administration through gpssh and gpscp  </p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Greenplum Server Architecture</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li>2 Master Servers, N segment servers all connected through private high speed network (10GBPS)<br></li>
<li>The master server is the interface to the external world. A user connects to the master and submits queries (SQLs) to the master. The standby master server acts as a failover server for the master.<br></li>
<li>The master server runs a single PostgreSQL database.</li>
<li>Each of the N segment servers run 2M segment databases, M primary and M mirror databases. Each primary segment database (NM of them) has a corresponding mirror database that resides on a different server. The mirroring happens in real time so they are always synchronized. If / When a segment server fails, the corresponding mirror databases take over so the system runs.<br></li>
<li>For the DCA V1 Greenplum appliances running at IRS, N = 16, M = 6. For the new DCA V2s, M = 8.<br></li>
<li>The Greenplum Database Architecture is explained in detail in <a href="http://gpdb.docs.pivotal.io/4360/admin_guide/intro/arch_overview.html">Official Greenplum Documentation</a><br></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Table Design Fundamentals (Distribution Policy)</h2>
  </hgroup>
  <article data-timings="">
    <p>Data for all tables in Greenplum are distributed to the segment databases. The master server simply has the table structure and statistical information regarding the table.  </p>

<p>Data is distributed using hash-bucketing. The user creating the table has control over the parameters (columns) that would be used for this hash bucketing. For efficient processing and storage, we need to make sure that the data is distributed reasonably evenly to the NM segment databases. The following strategies may be employed to find a good distribution key for a table. Multiple columns can be used for a distribution key.</p>

<ol>
<li>Do not use column(s) with few distinct values. Consider the extreme case where a column has one unique value. All data will remain in one segment database.<br></li>
<li>Do not use columns where a few values have a very high chance of occuring compared to others.<br></li>
<li>In general, use values that are fairly unique.<br></li>
<li>Avoid using too many columns as distribution key.<br></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Table Design Fundamentals (Distribution Policy)</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li>For large tables frequetly joined to each other, use the join key (or part of the join key) as the distribution key.<br></li>
<li>If you have a primary key, the distribution key must be the primary key columns or a subset.</li>
<li>If you are not able to come up with any strategy, use random distribution.<br></li>
<li>Check how well your data is distributed using the system generated column gp_segment_id.<br></li>
</ol>

<pre><code class="r">select gp_segment_id,  
       count(*)  
from   my_table  
group by gp_segment_id;  
</code></pre>

<p>If the counts are too uneven, consider re-adjusting your distribution policy.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Table Design Fundamentals (Data Types)</h2>
  </hgroup>
  <article data-timings="">
    <p><br/>
Consider using the most efficient data type for your requirement. You will have smaller storage footprint (Remember BDA is a shared environment) and faster and more efficient processing.</p>

<ol>
<li>Prefer smallint, int, bigint, real, double precision over the generic numeric data types.<br></li>
<li>Choose the correct date/time data type: date, timestamp, timestamp with time zone.<br></li>
<li>Read more about datatypes here: <a href="http://www.postgresql.org/docs/8.2/static/datatype.html">http://www.postgresql.org/docs/8.2/static/datatype.html</a></li>
<li>There is a boolean data type available for true/false values.</li>
<li>When using sequences to auto-generate Ids, use a high cache value (100+) for the sequence.<br></li>
<li>Greenplum supports more complex data structures like arrays and XML as data types. Make sure you have a good plan and justification before using them.<br></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Table Design Fundamentals (Partitioning)</h2>
  </hgroup>
  <article data-timings="">
    <p><br/>
Greenplum lets you fine tune storage, performance and archival through partitioning. This is a way to subdivide the data for a table within each segment database using user-defined buckets. Both list and range partitioning are supported along with multi-level partitions.  </p>

<p>Please keep the following in mind when deciding to partition a table:  </p>

<ol>
<li><p>Because the data is already divided using distribution, further subdivision using partitions may be more inefficient. Consider a 100GB table in a 96 segment database DCA. Data is already split to 1GB segments. Applying 10 partitions on top of that will not help a lot, but will come with additional partition management tasks.  </p></li>
<li><p>For column-oriented tables, data is further subdivided by columns. Consider the table size before partitioning a column-oriented table.  </p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Table Design Fundamentals (Orientation and Compression)</h2>
  </hgroup>
  <article data-timings="">
    <p>Tables can be further optimized by adding orientation and compression.</p>

<p><strong>Orientation</strong>:<br>
1. Heap =&gt; Regular tables, use for tables that are updated, deleted very often and truncate / insert is not viable.<br>
2. Append Optimized =&gt; Storage is optimized, but updates / deletes should be less frequent.<br>
3. Columnar =&gt; Append optimized be default. Stores every column separately, so when you select a few columns from a table, IO is faster.  </p>

<p><strong>Compression</strong>:<br>
1. Tables can be compressed using a QUICKLZ, RLE_TYPE(columnar only) or ZLIB algorithm.<br>
2. Compression level of 1-9 can be specified.<br>
3. Each partition can be compressed differently.  </p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>BDA Environment Considerations</h2>
  </hgroup>
  <article data-timings="">
    <p>BDA is a shared environment</p>

<p>You will be sharing the resources of a single Greenplum Instance. So it is important to plan, optimize and discuss viability of the following:  </p>

<ol>
<li>Storage Requirement<br></li>
<li>ETL processing<br>
i. Time<br>
ii. Frequency<br>
iii. Number of paralell Greenplum Connections needed<br></li>
<li>Reporting<br>
i. Number of concurrent users<br>
ii. Average report run-times or ETAs<br>
iii. Negative TIN requirements<br></li>
</ol>

<hr>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Greenplum Database is now open source'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Greenplum as MPP'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Greenplum Server Architecture'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Table Design Fundamentals (Distribution Policy)'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Table Design Fundamentals (Distribution Policy)'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Table Design Fundamentals (Data Types)'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Table Design Fundamentals (Partitioning)'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Table Design Fundamentals (Orientation and Compression)'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='BDA Environment Considerations'>
         9
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>